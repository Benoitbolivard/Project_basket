<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Scoreboard Basket</title>
  <style>
    body { font-family: sans-serif; background: #f8f9fa; max-width: 500px; margin: 1.2rem auto;}
    #config, #match { max-width: 420px; margin: 2rem auto; }
    h2, h1 { text-align: center; }
    .scoreboard { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 1em 2em; border-radius: 1em; box-shadow: 0 2px 8px #ddd; }
    .team { width: 35%; font-size: 1.2em; font-weight: bold; }
    #score { font-size: 3.2em; font-weight: bold; }
    #timer { font-size: 2.5em; margin: 1.3em 0 0.4em 0; color: #007bff; text-align: center;}
    #period { font-size: 1.1em; text-align: center; margin-bottom: 1em;}
    #mainBtns { display: flex; justify-content: center; gap: 1.5em; margin-bottom:1em; }
    button { font-size: 1.15em; padding: 0.7em 1.3em; border-radius: 0.5em; border: none; background: #007bff; color: #fff; margin:0.15em; cursor: pointer; }
    button:hover { background: #0056b3;}
    .hidden { display:none;}
    @media (max-width:600px) {
      .scoreboard { flex-direction: column; gap: .4em;}
      #score { font-size: 2.3em;}
      #timer { font-size: 1.6em;}
    }
  </style>
</head>
<style>
    .scorebox {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff;
      border-radius: 1.2em;
      box-shadow: 0 2px 8px #ddd;
      padding: 1.1em 1.6em 1.6em 1.6em;
      margin-bottom: 0.7em;
      min-width: 310px;
    }
    .scorecol {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5em;
      min-width: 70px;
    }
    .teamname {
      font-size: 1.4em;
      font-weight: bold;
      margin-bottom: 0.4em;
      letter-spacing: 0.06em;
    }
    .pointBtns button {
      display: block;
      width: 60px;
      margin: 0.19em 0;
      font-size: 1.2em;
      padding: 0.6em 0;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 0.38em;
    }
    .scorecenter {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0 1em;
    }
    .scorebig {
      font-size: 4em;
      font-weight: 800;
      letter-spacing: 0.12em;
      margin-bottom: 0.08em;
    }
    .timerInBox {
      font-size: 2.15em;
      color: #007bff;
      margin-top: 0.2em;
      font-family: 'Roboto Mono', 'Consolas', monospace;
    }
    @media (max-width:600px) {
      .scorebox { flex-direction: column; gap: 0.8em; padding: 1em 0.7em 1.3em 0.7em; min-width: 0;}
      .scorecenter { margin: 0.7em 0; }
      .scorecol { min-width: 0; }
      .scorebig { font-size: 2.5em; }
      .teamname { font-size: 1.15em; }
      .timerInBox { font-size: 1.1em; }
    }
    </style>
    
<body>
  <!-- PAGE CONFIG (d√©j√† valid√©e) -->
  <div id="config">
    <h2>Param√®tres du match</h2>
    <div class="fieldgroup">
      <label for="team1">Nom √©quipe domicile :</label>
      <input id="team1" type="text" placeholder="ex : Golden State" required />
    </div>
    <div class="fieldgroup">
      <label for="team2">Nom √©quipe ext√©rieur :</label>
      <input id="team2" type="text" placeholder="ex : Chicago" required />
    </div>
    <div class="fieldgroup">
      <label for="periodDuration">Dur√©e d‚Äôun quart-temps :</label>
      <select id="periodDuration">
        <option value="600">10 minutes</option>
        <option value="480">8 minutes</option>
        <option value="720">12 minutes</option>
        <option value="300">5 minutes</option>
        <option value="custom">Autre (√† saisir‚Ä¶)</option>
      </select>
      <input id="customDuration" type="number" style="display:none; margin-top:0.5em;" min="1" max="30" placeholder="Minutes (1-30)">
    </div>
    <div class="fieldgroup">
      <label for="timeouts">Nombre de temps-morts par √©quipe :</label>
      <select id="timeouts">
        <option value="2">2</option>
        <option value="3" selected>3</option>
        <option value="4">4</option>
      </select>
    </div>
    <button id="startMatch">Commencer le match</button>
  </div>
  <!-- PAGE MATCH -->
  <div id="match" class="hidden">
    <div style="text-align:center; font-size:1.4em; margin-bottom: 0.3em;">
      <span id="quartLabel">1er quart-temps</span>
    </div>
  
    <div class="scorebox">
      <!-- Nom et boutons domicile -->
      <div class="scorecol">
        <div class="teamname" id="teamHome"></div>
        <div class="pointBtns">
          <button onclick="updateScore('home',1)">+1</button>
          <button onclick="updateScore('home',2)">+2</button>
          <button onclick="updateScore('home',3)">+3</button>
        </div>
      </div>
  
      <!-- Bloc central : score et chrono -->
      <div class="scorecenter">
        <div class="scorebig">
          <span id="scoreHome">0</span>
          <span style="font-size:1.2em;">‚Äì</span>
          <span id="scoreAway">0</span>
        </div>
        <div id="timer" class="timerInBox">00:00</div>
      </div>
  
      <!-- Nom et boutons visiteur -->
      <div class="scorecol">
        <div class="teamname" id="teamAway"></div>
        <div class="pointBtns">
          <button onclick="updateScore('away',1)">+1</button>
          <button onclick="updateScore('away',2)">+2</button>
          <button onclick="updateScore('away',3)">+3</button>
        </div>
      </div>
    </div>
  
    <!-- Fl√®che de possession -->
    <div style="text-align:center; margin:1em 0 0.4em 0;">
      <div id="possessionDisplay" style="font-size:2.8em;">‚¨ÖÔ∏è</div>
      <div style="font-size:1.1em; letter-spacing: 0.09em; color: #222;">Possession</div>
    </div>
  
    <!-- Les autres boutons en-dessous -->
    <div id="mainBtns">
      <button id="timerStartPause">D√©marrer</button>
      <button id="timerReset">Remise √† z√©ro</button>
      <button id="nextPeriod">P√©riode suivante</button>
    </div>
  
    <!-- Les sections fautes, temps-morts, etc, restent ici -->
    <!-- ...ne touche pas √† ces parties pour l‚Äôinstant... -->
  
    <!-- Section FAUTES D'√âQUIPE repliable -->
<div style="margin-bottom:1.3em;">
    <button id="toggleFautes" style="background:none; color:#007bff; font-size:1.2em; border:none; cursor:pointer;">
      <span id="fautesArrow" style="font-size:1.2em;">&#9654;</span> Fautes d‚Äô√©quipe
    </button>
    <div id="fautesSection" class="hidden" style="background:#fff; border-radius:1em; padding:1em; margin-top:0.7em;">
      <div style="display:flex; justify-content:space-around;">
        <div>
          <div style="font-weight:bold; text-align:center;">üè† <span id="fauteHomeLabel"></span></div>
          <button onclick="addFaute('home')" style="margin:0.2em 0;">+1</button>
          <button onclick="resetFaute('home')" style="margin:0.2em 0;">Remise √† z√©ro</button>
          <div>Fautes : <span id="fauteHome">0</span> / <span id="fauteLimit"></span></div>
          <div id="bonusHome" style="color:red; font-weight:bold;"></div>
        </div>
        <div>
          <div style="font-weight:bold; text-align:center;">üöó <span id="fauteAwayLabel"></span></div>
          <button onclick="addFaute('away')" style="margin:0.2em 0;">+1</button>
          <button onclick="resetFaute('away')" style="margin:0.2em 0;">Remise √† z√©ro</button>
          <div>Fautes : <span id="fauteAway">0</span> / <span id="fauteLimit"></span></div>
          <div id="bonusAway" style="color:red; font-weight:bold;"></div>
        </div>
      </div>
    </div>
  </div>
<!-- Section TEMPS-MORTS repliable -->
<div style="margin-bottom:1.3em;">
    <button id="toggleTM" style="background:none; color:#007bff; font-size:1.2em; border:none; cursor:pointer;">
      <span id="tmArrow" style="font-size:1.2em;">&#9654;</span> Temps-morts
    </button>
    <div id="tmSection" class="hidden" style="background:#fff; border-radius:1em; padding:1em; margin-top:0.7em;">
      <div style="display:flex; justify-content:space-around;">
        <div>
          <div style="font-weight:bold; text-align:center;">üè† <span id="tmHomeLabel"></span></div>
          <button onclick="addTM('home')" style="margin:0.2em 0;">+1</button>
          <button onclick="resetTM('home')" style="margin:0.2em 0;">Remise √† z√©ro</button>
          <div>Temps-morts : <span id="tmHome">0</span> / <span id="tmMax"></span></div>
        </div>
        <div>
          <div style="font-weight:bold; text-align:center;">üöó <span id="tmAwayLabel"></span></div>
          <button onclick="addTM('away')" style="margin:0.2em 0;">+1</button>
          <button onclick="resetTM('away')" style="margin:0.2em 0;">Remise √† z√©ro</button>
          <div>Temps-morts : <span id="tmAway">0</span> / <span id="tmMax"></span></div>
        </div>
      </div>
    </div>
  </div>
  
    <!-- BOUTONS SCORE -->
    <div style="display: flex; justify-content:space-between; gap:.7em; margin-bottom:1.2em;">
      <div>
        <div style="text-align:center; font-size:1.1em;">üè†</div>
        <button onclick="updateScore('home',1)">+1</button>
        <button onclick="updateScore('home',2)">+2</button>
        <button onclick="updateScore('home',3)">+3</button>
      </div>
      <div>
        <div style="text-align:center; font-size:1.1em;">üöó</div>
        <button onclick="updateScore('away',1)">+1</button>
        <button onclick="updateScore('away',2)">+2</button>
        <button onclick="updateScore('away',3)">+3</button>
      </div>
    </div>
  </div>
<script>
    //// PAGE CONFIG
    const periodSelect = document.getElementById('periodDuration');
    const customInput = document.getElementById('customDuration');
    periodSelect.addEventListener('change', () => {
      customInput.style.display = periodSelect.value === 'custom' ? 'block' : 'none';
    });
    document.getElementById('startMatch').addEventListener('click', () => {
      const team1 = document.getElementById('team1').value.trim() || "Domicile";
      const team2 = document.getElementById('team2').value.trim() || "Ext√©rieur";
      let period = periodSelect.value;
      if (period === 'custom') {
        let min = parseInt(customInput.value, 10);
        if (isNaN(min) || min < 1 || min > 30) { alert("Dur√©e invalide"); return; }
        period = (min * 60).toString();
      }
      const timeouts = document.getElementById('timeouts').value;
      localStorage.setItem('team1', team1);
      localStorage.setItem('team2', team2);
      localStorage.setItem('period', period);
      localStorage.setItem('timeouts', timeouts);
      window.location.href = window.location.pathname + "?start=1";
    });
    
    //// PAGE MATCH ‚Äî si "start" dans l‚ÄôURL, on affiche la page match
    function getParam(k){return new URLSearchParams(window.location.search).get(k);}
    if(getParam("start")) {
      document.getElementById("config").classList.add("hidden");
      document.getElementById("match").classList.remove("hidden");
      // Initialisation
      let homeName = localStorage.getItem('team1')||'Domicile';
      let awayName = localStorage.getItem('team2')||'Ext√©rieur';
      document.getElementById("teamHome").textContent = homeName;
document.getElementById("teamAway").textContent = awayName;
document.getElementById('scoreHome').textContent = home;
document.getElementById('scoreAway').textContent = away;

      document.getElementById("teamHome").textContent = homeName;
      document.getElementById("teamAway").textContent = awayName;
      let home=0, away=0, periodNum=1, nbPeriods=4;
    
      // Possession
      let possession = 'home'; // 'home' ou 'away'
      function updatePossessionDisplay() {
  let arrow = possession === 'home' ? '‚¨ÖÔ∏è' : '‚û°Ô∏è';
  document.getElementById('possessionDisplay').textContent = arrow;
}
        document.getElementById('possessionArrow').textContent = arrow;
        document.getElementById('possessionTeam').textContent = teamName;
      }
      document.getElementById('changePoss').addEventListener('click', () => {
        possession = (possession === 'home') ? 'away' : 'home';
        updatePossessionDisplay();
      });
    
      // Fautes et TM
      let fauteHome = 0, fauteAway = 0;
      const fauteLimit = 5;
      let tmHome = 0, tmAway = 0;
      let tmMax = parseInt(localStorage.getItem('timeouts')) || 3;
      // Temps-morts
      function updateTMDisplay() {
        document.getElementById('tmHome').textContent = tmHome;
        document.getElementById('tmAway').textContent = tmAway;
        document.getElementById('tmMax').textContent = tmMax;
        document.getElementById('tmHomeLabel').textContent = homeName;
        document.getElementById('tmAwayLabel').textContent = awayName;
      }
      function addTM(team) {
        if(team === 'home' && tmHome < tmMax) tmHome++;
        else if(team === 'away' && tmAway < tmMax) tmAway++;
        updateTMDisplay();
      }
      function resetTM(team) {
        if(team === 'home') tmHome = 0;
        else if(team === 'away') tmAway = 0;
        updateTMDisplay();
      }
      window.addTM = addTM;
      window.resetTM = resetTM;
    
      // Fautes
      function updateFautesDisplay() {
        document.getElementById('fauteHome').textContent = fauteHome;
        document.getElementById('fauteAway').textContent = fauteAway;
        document.getElementById('fauteLimit').textContent = fauteLimit;
        document.getElementById('fauteHomeLabel').textContent = homeName;
        document.getElementById('fauteAwayLabel').textContent = awayName;
        document.getElementById('bonusHome').textContent = fauteHome >= fauteLimit ? 'üí• Bonus adverse !' : '';
        document.getElementById('bonusAway').textContent = fauteAway >= fauteLimit ? 'üí• Bonus adverse !' : '';
      }
      function addFaute(team) {
        if(team === 'home') fauteHome++;
        else fauteAway++;
        updateFautesDisplay();
      }
      function resetFaute(team) {
        if(team === 'home') fauteHome = 0;
        else fauteAway = 0;
        updateFautesDisplay();
      }
      window.addFaute = addFaute;
      window.resetFaute = resetFaute;
    
      // Score
      document.getElementById('score').textContent = `${home} ‚Äì ${away}`;
      let periodDur = parseInt(localStorage.getItem('period')||'600',10);
      let timer = periodDur, timerInterval=null, isRunning=false;
    
      function showPeriod(){
  let txt = periodNum === 1 ? "1er" : periodNum + "e";
  document.getElementById('quartLabel').textContent = `${txt} quart-temps`;
}
      function updateScore(team, pts){
  if(team==='home'){ home += pts; document.getElementById('scoreHome').textContent = home; }
  else if(team==='away'){ away += pts; document.getElementById('scoreAway').textContent = away; }
}

        document.getElementById('score').textContent = `${home} ‚Äì ${away}`;
      window.updateScore = updateScore;
    
      function formatTime(sec){
        let m = String(Math.floor(sec/60)).padStart(2,'0');
        let s = String(sec%60).padStart(2,'0');
        return m+':'+s;
      }
      function updateTimerDisplay(){ document.getElementById('timer').textContent = formatTime(timer); }
    
      // Chrono
      document.getElementById('timerStartPause').addEventListener('click',()=>{
        if(isRunning){
          clearInterval(timerInterval);
          document.getElementById('timerStartPause').textContent = 'D√©marrer';
        } else {
          timerInterval = setInterval(()=>{
            if(timer > 0){
              timer--; updateTimerDisplay();
              if(timer===0){
                clearInterval(timerInterval);
                document.getElementById('timerStartPause').textContent = 'D√©marrer';
                // BIP sonore
                const buzzer = document.getElementById('buzzer');
                buzzer.currentTime = 0;
                buzzer.currentTime = 0;
buzzer.play();
setTimeout(() => {
  alert("Fin de la p√©riode !");
}, 700); // Attend 0.7 seconde avant le popup (tu peux ajuster √† 500ms si tu veux)

              }
            }
          },1000);
          document.getElementById('timerStartPause').textContent = 'Pause';
        }
        isRunning = !isRunning;
      });
    
      document.getElementById('timerReset').addEventListener('click',()=>{
        clearInterval(timerInterval); isRunning=false;
        timer = periodDur; updateTimerDisplay();
        document.getElementById('timerStartPause').textContent = 'D√©marrer';
      });
    
      document.getElementById('nextPeriod').addEventListener('click',()=>{
        if(periodNum<nbPeriods){
          periodNum++;
          clearInterval(timerInterval); isRunning=false;
          timer = periodDur; updateTimerDisplay();
          // Remise √† z√©ro des fautes d'√©quipe √† chaque nouvelle p√©riode
          fauteHome = 0; fauteAway = 0; updateFautesDisplay();
          // Remise √† z√©ro des temps-morts √† chaque nouvelle p√©riode
          tmHome = 0; tmAway = 0; updateTMDisplay();
          showPeriod();
          document.getElementById('timerStartPause').textContent = 'D√©marrer';
        } else {
          alert("Fin du match !");
        }
      });
    
      showPeriod();
      updateScore(); 
      updateTimerDisplay();
      updatePossessionDisplay();
      updateTMDisplay();
      updateFautesDisplay();
    
      // Syst√®me de section repliable FAUTES
      const fautesSection = document.getElementById('fautesSection');
      const toggleFautes = document.getElementById('toggleFautes');
      const fautesArrow = document.getElementById('fautesArrow');
      toggleFautes.addEventListener('click', () => {
        const isHidden = fautesSection.classList.toggle('hidden');
        fautesArrow.innerHTML = isHidden ? '&#9654;' : '&#9660;';
      });
    
      // Syst√®me de section repliable TEMPS-MORTS
      const tmSection = document.getElementById('tmSection');
      const toggleTM = document.getElementById('toggleTM');
      const tmArrow = document.getElementById('tmArrow');
      toggleTM.addEventListener('click', () => {
        const isHidden = tmSection.classList.toggle('hidden');
        tmArrow.innerHTML = isHidden ? '&#9654;' : '&#9660;';
      });
    </script>
    